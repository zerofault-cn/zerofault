


DVD杀手――MPEG4技术全攻略

(这条文章已经被阅读了22932次) 时间：2003年11月18日 10:44　来源：周军 教程

 

 
                 

说起MPEG4技术，很多朋友熟悉的就是网上那些清晰度极高的MPEG4电影，可是要是认为MPEG4技术只能用来进行一些影音播放，你可就太小瞧它了。

MPEG全称是Moving Pictures Experts Group，它是“动态图象专家组”的英文缩写，该专家组成立于1988年，致力于运动图像及其伴音的压缩编码标准化工作，原先他们打算开发MPEG1、MPEG2、MPEG3和MPEG4四个版本，以适用于不同带宽和数字影像质量的要求。

目前，MPEG1技术被广泛的应用于VCD，而MPEG2标准则用于广播电视和DVD等。MPEG3最初是为HDTV开发的编码和压缩标准，但由于MPEG2的出色性能表现， MPEG3只能是死于襁褓了。而我们今天要谈论的主角――MPEG4于1999年初正式成为国际标准。它是一个适用于低传输速率应用的方案。与MPEG1和MPEG2相比，MPEG4更加注重多媒体系统的交互性和灵活性。下面就让我们一起进入多彩的MPEG4世界。

MPEG4的技术特点

MPEG1、MPEG2技术当初制定时，它们定位的标准均为高层媒体表示与结构，但随着计算机软件及网络技术的快速发展，MPEG1.MPEG2技术的弊端就显示出来了：交互性及灵活性较低，压缩的多媒体文件体积过于庞大，难以实现网络的实时传播。而MPEG4技术的标准是对运动图像中的内容进行编码，其具体的编码对象就是图像中的音频和视频，术语称为“AV对象”，而连续的AV对象组合在一起又可以形成AV场景。因此，MPEG4标准就是围绕着AV对象的编码、存储、传输和组合而制定的，高效率地编码、组织、存储、传输AV对象是MPEG4标准的基本内容。

在视频编码方面，MPEG4支持对自然和合成的视觉对象的编码。（合成的视觉对象包括2D、3D动画和人面部表情动画等）。在音频编码上，MPEG4可以在一组编码工具支持下，对语音、音乐等自然声音对象和具有回响、空间方位感的合成声音对象进行音频编码。

由于MPEG4只处理图像帧与帧之间有差异的元素，而舍弃相同的元素，因此大大减少了合成多媒体文件的体积。应用MPEG4技术的影音文件最显著特点就是压缩率高且成像清晰，一般来说，一小时的影像可以被压缩为350M左右的数据，而一部高清晰度的DVD电影, 可以压缩成两张甚至一张650M CD光碟来存储。对广大的“平民”计算机用户来说， 这就意味着, 您不需要购置DVD-ROM就可以欣赏近似DVD质量的高品质影像。而且采用MPEG4编码技术的影片，对机器硬件配置的要求非常之低，300MHZ 以上CPU，64M的内存和一个 8M显存的显卡就可以流畅的播放。在播放软件方面，它要求也非常宽松，你只需要安装一个 500K左右的 MPEG4 编码驱动后，用 WINDOWS 自带的媒体播放器就可以流畅的播放了（下面我们会具体讲到）。

MPEG4的应用领域

凭借着出色的性能，MPEG4技术目前在多媒体传输、多媒体存储等领域得到了广泛的应用，下面我们就来看看目前在那些领域MPEG4技术得到了大显伸手的机会。

1、 精彩的视频世界

精彩的视频世界是MPEG4技术应用最多也是最为广大朋友所熟悉的的形式。目前它主要以两种形式出现，一种是DIVX－MPEG4影碟（国内市面上已出现，且D版居多），另一种是网上MPEG4电影。

（1）、我们先来说说DIVX－MPEG4影碟，DIVX视频编码技术实际上就是MPEG4压缩技术，它由微软MPEG4V3修改而来，使用的是MPEG4压缩算法，并同时分离视频和音频。它的核心部分便是由DivX对DVD音视频进行压缩，生成Mpeg4视频格式文件(也就是AVI格式)。

小提示：笔者也是经常被朋友所问到：“我看到的MPEG4电影片段明明是avi（扩展名）格式文件，并且Windows的媒体播放器也与之关联，但就是无法播放”。其实， MPEG4并没有确定必须用什么扩展名，它只是一种编码方法而已。使用avi作为扩展名，是一种习惯性的沿用。

在计算机上播放MPEG4影音文件的方法目前有两种：第一种是用诸如DivxPlayer等专门的播放软件来播放；第二种播放方法是安装MPEG4(Divx)插件后，用Windows自带的媒体播放机来播放。

（2）、随着网络技术的不断发展，互联网上的视频流应用也成为了近几年的热门话题。目前，在互联网上比较流行的几种影像格式包括Quicktime、RealPlay以及微软的MediaPlayer等。MPEG4技术出现之后，互联网上又出现了MPEG4格式的电影，不过在观看前，系统会提示你下载最新的MPEG4解码软件。

小提示：大家平时在网上可能经常会看见ASF格式的电影，其实它也是微软公司开发出的一种可以直接在网上观看视频节目的压缩格式。使用的也是MPEG4的压缩算法，但因为它是以网上即时观看电影的视频流格式存在的，所以它的图像质量相对要差一些。

2、 低比特率下的多媒体通信，

目前，MPEG4技术已经广泛的应用在如视频电话、视频电子邮件、移动通信、电子新闻等多媒体通信领域。由于这些应用对传输速率要求较低，一般在4.8～64kbit/s之间，分辨率为176×144左右。因此MPEG4技术完全可以充分的利用网络带宽，通过帧重建技术压缩和传输数据，以最少的数据量获得最佳的图像质量。

3、 实时多媒体监控。

多媒体监控领域原来一直是MPEG1技术担当重任，但近些年来，它们也是“城头变换大王旗”了。由于MPEG4压缩技术原本是一种适用在低带宽下进行信息交换的音视频处理技术，它的特点是可以动态的侦测图像各个区域变化，基于对象的调整压缩方法可以获得比MPEG1更大的压缩比，使压缩码流更低。因此，尽管MPEG4技术一开始并不是专为视频监控压缩领域而开发的，但它高清晰度的视频压缩，在实时多媒体监控上，无能是存储量，传输的速率，清晰度都比MPEG1具有更大的优势。

4、 基于内容存储和检索的多媒体系统。

由于MPEG4在压缩方法上远远优于MPEG1技术，更是MJPEG技术所不能比拟的。 经过专家的测试表明，在相同清晰度对应MPEG1（500Kbits/sec）码流情况下， MPEG4比MPEG1节省了2/3的硬盘空间，在一般活动场景下也节省近一般的容量。因此无论是从内容存储量，还是从多媒体文件的检索速度来说，MPEG4技术都是多媒体系统应用的不二之选。

5、硬件产品上面的应用

目前，MPEG4技术在硬件产品上也已开始逐步得到应用。如日本夏普公司推出的应用在互联网上的数字摄像机VN－EZ1。这台网络摄像机利用MPEG4格式，可把影像文件压缩为ASF（高级流格式），用户只要利用微软公司的MediaPlayer播放程序，就可以直接在电脑上进行播放。又如，在移动多媒体通信领域，摩托罗拉公司在今年5月份宣布开发出用手机看电影的技术。该公司已研制成功通过GPRS（通用数据包无线业务）移动数据网络传输MPEG4格式图像的系统。另外，目前市场上还出现了一种MPEG4播放机，它拥有一个TV输出口，可以向电视机提供高品质的MPEG4图象，同时它还能支持MP3，可以直接浏览JPG，BMP的图片等等。

MPEG影片全攻略

对我们更多的读者来说，精彩的DIVX－MPEG4影碟和网上MPEG4电影是我们最熟悉，也是最感兴趣的，下面笔者就来重点谈谈它们。

MPEG4播放篇

一、播放软件

MPEG4是深受人们喜爱的电影文件格式，它以其优品质画面与高压缩比而吸引着众多的“平民电影迷”。可是要想在电脑上正常播放MPEG4影片，我们就需要专门的播放软件了。

尽管目前市场上支持MPEG4格式的播放软件并不少见。但依笔者的经验，Windows系统自带的Windows Media Player（WMP）和 DXN（DivXNetworks, Inc.）公司开发的DiVX Player是最好，也是最少出现问题的MPEG4播放软件。由于DIVX PLAYER就是为MPEG4技术量身开发的，它本身整合了DivX Codec，因此在播放上一般不需要什么设置。笔者这里就罗嗦几句，谈谈WMP的设置使用。

WMP要想成功的播放MPEG4影片，必须在播放前安装MPEG4插件(在下面的制作MPEG4影片环节我们会具体谈到），它们是：

（1）       音频插件： AC3filters；OggDS；mmswitch（用于解决双声道语音问题）；

（2）       视频编码解码插件：divx_311；divx 5.02；XviD；ffdshow MPEG-4 Video Decoder；

（3）       字幕插件：VobSub 2.16或VobSub 2.18 ；

听起来挺复杂，其实安装起来很简单的：一般现在的MPEG4电影光盘，都会自带有MPEG4插件或独立的播放程序。打开光盘，我们会看到一个Core目录与Mpeg4.exe文件，运行这个可执行文件后，DivX通用解码器就安装上了。另外，您还可以通过在线下载来安装解码器。（http://www.tryhear.com/download/mpeg4-divX.zip）

二 、常见播放问题解决

      由于MPEG4影片的播放不像VCD那么简单，播放过程中还可能出现这样或那样的问题，因此我们在使用时还必须掌握一些解决这些问题的技巧。

       症状 ①有声音无图像

      一般说来这是由字幕插件引起的。如果你在不用字幕情况下，就可以正常显示图像，那么试试降低显示器的刷新频率或调整屏幕分辨率大小。

       症状②有图像无声音

      首先，你要确认AC3 Filter是否已经正常安装。通常AC-3解码器需要微软的DirectX 8.0或更高的版本与之配合，用DirectX诊断工具检查是否安装。另外，不稳定的声卡驱动也可能导致影片无声，试着下载最新的或最稳定的声卡驱动。

       症状③画面不连贯

如果你机器配置不够高，那么只能牺牲部分播放质量来减轻CPU的负担了。一般我们可通过调节视频播放软件的图像质量来解决。

MPEG4制作篇

制作MPEG4文件是将自己的视频、影像和音频素材经过编辑加工后，保存为MPEG4电影格式，在视频编辑软件中， Ulead 的MediaStudio Pro和 Adobe的Premiere可以算作是最专业的视频制作软件了。不过对我们广大不同的家庭用户来说，它们都过于复杂，因此不在本文讨论之列。

一、VCD转MPEG4

尽管现在许多朋友都看上了DVD影片，但对一些“平民用户”来说，CD－ROM还是他们电脑不可缺少的标配，用CD-ROM看VCD也成了他们最爱的影音娱乐方式，不过VCD电影动辄几百兆的体积实在是让人受不了。由于MPEG4有着很高的压缩比，而且对原画质影响很小，因此将VCD转成 MPEG4 就可以为我们省下不少硬盘空间。

小提示：经测试，双碟的VCD可以在不损画质的情况下转成单碟的MPEG4，而一首 45 兆的MTV转成MPEG4，如果用 600 的码率的话，生成的 MPEG4 文件是 8.4 兆，差不多有 5 倍的压缩率。

对我们很多“电脑碟友”来说，超级解霸是我们最熟悉的视频播放软件了，下面笔者就以超级解霸中自带的转换工具为例，为您详细介绍一下怎样将VCD转换成MPEG4格式。

首先，我们选择“开始菜单/程序/豪杰超级解霸3000/实用工具集，选中“常用工具”选项里的“MPEG转AVI（MPEG4）。单击后弹出一个窗口，在文件菜单中打开你想转换的VCD文件，在这里，你还可以根据自己的需要来定义各种参数，选择压缩区域，范围等(图mpeg1)。

 

1、打开文件：点击“打开”图标导入你需要转换的VCD视频文件(后缀名为DAT)。在Preview预览选框，你还可以进行影片预览、选取压缩区域、设置开始点、设置结束点等操作。

2、在“视频流（Video Stream）”选项里设置输出视频文件的属性（图mpeg2）。这里主要是用来选择压缩的方式，默认是MPEG4的压缩方式。  

3、  “宽/高度”选项里调整输出视频图像的宽高比例，要想感受DVD的效果，你可以将宽高比例设置为16：9（缺省为原输入视频的宽/高度）。

4、  在“ 音频流”选项里，适度调整输出文件的音频属性。默认的是MPEG Layer-3 Codec(即MPG4的音频压缩程序)，一般无需改动。

5、  一切都设置好后，我们就可以选择好输出目录，开始压缩了。不过压缩的时间可是比较长哦，没耐性的你可以先去泡杯茶，看看报纸嘛！

 

DVD转换成MPEG4

其实，通过上述的超级解霸3000实用工具，我们也可以将DVD转换成MPEG4格式，不过据实践证明，超级解霸在转换DVD影片效果不是太好，而且还容易出现一些莫名其妙的问题，笔者这里就不敢妄自推荐了。好在视频转换软件种类还很多，下面就为您介绍一种“准专业”制作方法。 

一、从DVD中复制VOB文件

由于目前许多编码软件都不能从DVD光盘中直接读取VOB文件，进行转换，因此我们只有将DVD中的影音文件复制到硬盘当中。为了大家都能制作出高清晰，精良的MPEG4影片，笔者还是要冒着骗稿费的骂名，将DVD影碟的文件结构先罗嗦几句。

1、前期提示： 

DVD影片是存放在DVD光盘中的“VIDEO_TS”目录内，其中VOB文件是保存的影音数据，这些数据不仅包含影片本身，而且还有供菜单和按钮用的画面以及多种字幕的子画面流。IFO文件则是控制VOB文件播放的，在这个文件中可以找到如何以及何时播放VOB文件中数据的控制信息。

DVD光盘中的VMG文件是视频管理器，它存放在“VIDEO_TS.IFO”文件中，保存光盘的全局信息，比如光盘可以在哪个地区播放等。除了目录信息部分以“VIDEO_TS.VOB”为文件名以外，主要文件都以“VTS_xx_y”格式作为文件名。xx是标题编号(从01到99)；y是区段编号(从0到9)。

    由于DVD所使用的MicroUDF文件系统中单个文件最大只能有1GB，因此大多数影片都是保存在多个文件中的。某些DVD碟片中除了有电影正片之外，还可能有其他的节目，如新片预告、拍摄花絮等。记录正片数据的文件都拥有相同的标题编号，文件大小也最大。只有正片的VOB和IFO文件才是制作MPEG4影片时要用到的文件。

      2.复制VOB文件

      由于DVD使用的是CSS(Content Scrambling System，内容不规则系统)加密算法，因此我们首先要利用工具对它进行破解。SmartRipper是我们最常用的来破解复制软件。它的操作相当简单，运行SmartRipper后，它会自动对DVD碟片进行分析，分析完成后进入程序主界面，首先点击“Files”按钮，然后在“Source”栏中点击“All”按钮选择所有的文件，在“Target”栏中设置好文件保存的目录，最后点击“Start”按钮即可将VOB文件复制到硬盘中指定的目录（图mpeg3）。

 

 

 二、视频转换

   上面的工作完成后，我们就可以开始MPEG4影片的制作了。下面介绍MPEG4制作中最重要的环节──用 FlaskMPEG将VOB文件编码为MPEG4。

 小提示：FlaskMPEG是目前较流行的DVDrip编码软件，作为一种开放源代码软件它有很多的变种及第三方插件，建议在安装FlaskMPEG后再安装Miha iDCT Plugin和FlasKMPEG Thunder.Mism插件(解压至FlaskMPEG的目录中即可)，前者有助提高编码的速度及改善编码的质量，后者可让你通过打开第一个IFO文件来导入整部DVD影片。     

 1.导入VOB文件

     运行FlaskMPEG，点击“文件→打开文件”菜单命令，浏览至已解密的DVD文件所存放的目录，如果只有VOB文件，则打开第一个VOB文件。如果有IFO文件，则选择打开“文件类型”为“Thunder dvd MISM”即可打开记录DVD导航信息的IFO文件，FlaskMPEG会自动导入全部相关的VOB文件，选择好后在打开的“FlaskMPEG  DVD选择”窗口中选择正确的时间段和音轨(通常使用默认)，然后点击“Flask这张DVD”按钮即可将DVD影片导入进来。

    2.设置具体参数

     (1)视频设置：点击OPIONS/Advance opions的“Video”按钮，在打开的选项设置对话框中选择“视频”选项卡，将宽度与高度及帧率调整到与源文件一致。在“iDCT(反离散余弦函数转换)”选项中取消选中“Auto Select”选项，点击“iDCT Selection”按钮，在打开的对话框中选择iDCT为“Miha′s X87 Fast  iDCT”(即前面装入的插件)。在“视频构建”栏中选择“去除隔行扫描视频”选项，会有效的消除隔行视频产生的拉丝现象。（图MPEG5）

     (2)音频设置：点击Options/Advance options的“Audio”按钮可选择“音频解码”，然后根据需要设置采样频率，通常48KHz比44.1KHz在高频方面表现力会更好一些。如果要采用AC3音效可选择“直接数据流复制”，可单独将AC3音频输出为一个AC3文件。（图MPEG6）

(3)调整画面：很多DVD影片画面使用宽银幕格式，画面上下部都有一些黑边(16:9格式中必要的部份)，对于这类DVD影片建议使用修剪模式。你可设定只对有画面的地方进行编码，把其他黑色部份去掉。

画面裁剪在“Post Processing”选项卡中进行设置。去掉“NO Crop（不要修剪）”模式选项，然后在输出面板的“Crop”处调整高度、宽度、上部位移、左部位移的数值，将保留的画面(虚线框内)调整到一个合适的位置。调整好点击“OK”保存退出。（图mpeg7）

    3.音视频编码设置

      点击调节面板中的“Select Output”按钮，选择“AVI Output”命令，然后点击“Configure Output Module”设置输出AVI文件的音视频编码。Audio部分选择MPEG  Layer-3格式，属性选择96或128kbps，如果使用AC3音频，此处设置为PCM、48KHz、16位立体声即可。Video部分可供选择的编码器(Codec)很多，但必须使用MPEG4类型的编码器来制作，常见的编码有：DivX 3.11、DivX Pro 5.02 Codec和XviD MPEG-4 Codec，这几个Codec是目前最为流行的MPEG4类编码器，建议使用后两种，选择好后点击“配置”按钮，在打开的对话框中进行具体的配置，音频视频编码设置好后，返回到调节面板中点击“Flask it！”按钮即开始编码生成MPEG4文件。

   提示：这样编码出来的AVI文件是一个大的文件，也许一张光盘放不下，这样就要把分割成二个或三个文件，分割可使用Nandub或VirtualDub工具，限于篇幅，这里就不做介绍了。   

      4、制作字幕

     使用上面方法转换的MPEG4文件通常是没有字幕的，（不过是国语影片这步就可以省去了）。因此，我们还应将DVD的字幕提取出来并制作成MPEG4的外挂字幕，播放时我们就可以借助VobSub软件得到中文字幕。

    小提示： 常见的MPEG4外挂字幕有SUB、SSA、SRT等格式，其中SUB是图形格式的，在任何语言的操作系统下都有很好的兼容性；后两者则是文本格式的字幕，文件非常小并且可以很方便的进行调整。这几种字幕都能被VobSub直接支持。VobSub不仅用来支持字幕的播放，而且它还可用于制作SUB格式的MPEG4外挂字幕。

下载并安装好VobSub程序，点击“开始/程序/VobSub/VobSub Configure”。在弹出的窗口中选择“打开”命令，选择好文件类型，在指定文件保存位置后进入“选择段落”对话框，点击“全部”按钮确定，即开始生成字幕的索引。完成后点击“确定”按钮返回到程序主界面。

在主界面中选择所需字幕的语言(如Chinese)，点击“确定”后即可生成SUB格式的字幕文件(包括一个IDX文件和一个SUB文件)，将它们的改为与AVI相同的文件名(前缀)就可播放了。（图mpeg8）

      5、合并AC3音频

      现在来到了我们制作的最后一个步骤：合并AC3音频。由于AVI规格的开放性，它在视频和音频类型的组合上是比较自由的，因此我们可以将AC3音频组合到AVI文件中以得到与DVD同等的音响效果。我们可以用Nandub软件很方便的将mpeg4视频和AC3音频合并成AVI格式。

      (1)分离

      在上面编码部分设置FlaskMPEG时，我们已经在“音频”选项中选择“直接数据流复制”，然后在“文件”选项卡中设置AC3文件的输出路径。编码后，我们已经得到了一个AC3文件和一个无声音的AVI文件。

      (2)合并

使用Nandub合并AC3音频合并到AVI文件中的步骤是：在Nandub窗口中选择“File→Open Video file”菜单命令，导入上一步中生成的无声的AVI文件，然后选择“Video→Direct stream copy(直接流复制)”菜单命令，在“Audio”菜单中同样也设置成“Direct stream copy”选项，再点击“AC3 audio”会弹出“Open AC3 file”窗口，此时将前面生成的AC3文件导入进来。然后选择“File→Save as AVI”菜单命令输出mpeg4文件，由于是采用直接流复制，输出的速度应该非常快。

通过上面的介绍，相信你对MPEG4技术有个大致了解了吧，那就赶快去用自己学到的知识，DIY一张个性的MPEG4光盘吧！

                                                                       刊发于2003.11.11《电脑商情报》

 



［批 注 该 文］　　　［采 用 该 文］　　　［发 表 评 论］　　　［文章下载］　　　［关闭窗口］ 

相关批注：
暂时还没有媒体记者对这篇文章做出批注 
 

相关采用：
暂时还没有媒体记者采用这篇文章 
 

相关讨论：
没有评论         


 
  
 
 关于我们[English]　|　合作联系　|　版权信息　|　聚会相册　|　友情连接　|　使用指南 
Copyright (C) 2000-2005 DoNews.COM(IT写作社区) All Rights reserved.
Powered by Firestone Studio and Achech Software. 
